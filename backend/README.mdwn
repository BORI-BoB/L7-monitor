# Log 분석 웹 백엔드

- backend api & 기능 명세
- check-list

## 기능 목록

- 총 4개의 칼럼
  - **오늘의 트래픽 요약 Column**
    - 모든 트래픽 수 : `/api/traffics/summaries/all` **GET**
    - 공격 트래픽 수 : `/api/traffics/summaries/threat` **GET**
    - 오늘의 보안 레벨 : `/api/traffics/summaries/level` **GET**
  - **Main 트래픽 Dashboard**
    - 하루 단위의 트래픽 량 : `/api/traffics?period=day` **GET**
    - 1 시간 단위 트래픽 량 : `/api/traffics?period=hour` **GET**
    - 5 분 단위 트래픽 량 : `/api/traffics?period=five-minute` **GET**
  - **Log 검색하기**
    - 최근의 모든 로그 확인하고 정렬 및 검색 : `/api/logs` **GET**
  - **공격 유형 Dashboard**
    - 최근의 공격 유형
      1. xss : `/api/threats/xss` **GET**
      2. web shell : `/api/threats/wshell` **GET**
      3. sql injection : `/api/threats/sqli` **GET**
      4. improper request - status code 가 올바르지 않은 경우 : `/api/threats/improper` **GET**

## API

- `/api/traffics/{period}`
- `/api/traffics/summaries/{type}`
- `/api/logs`
- `/api/threats/{type}`

## Service

- TrafficService
  - 현재 시간을 기준으로 8 개의 트래픽 데이터를 반환
    - 5분 단위 : 40분 전 까지
    - 1시간 단위 : 8시간 전 까지
    - 하루 단위 : 8일 전 까지
- LogService
- ThreatService

## Todo & Check List

- [x] Layered 디렉토리 구성
- [x] application.yml 생성 및 db 설정 & 연결
- [x] normal 테이블 구성
- [x] DateTime & LocalDateTime 비교 및 파싱
- [x] 시간대 별로 Traffic 카운트 반환
  - [x] TrafficService 구현 및 테스트 코드 작성
    - [x] `ParameterizedTest` 로 각각의 PeriodType 마다의 테스트 자동화
  - [x] DTO 생성 (id, count, timestamp)
  - [ ] TrafficController 구현 및 테스트 코드 작성
  - [ ] 테스트 커버리지 90% 이상 달성

